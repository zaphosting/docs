"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[5334],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>h});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=i.createContext({}),s=function(e){var n=i.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=s(e.components);return i.createElement(u.Provider,{value:n},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},g=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,u=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=s(t),g=r,h=c["".concat(u,".").concat(g)]||c[g]||p[g]||a;return t?i.createElement(h,l(l({ref:n},d),{},{components:t})):i.createElement(h,l({ref:n},d))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,l=new Array(a);l[0]=g;var o={};for(var u in n)hasOwnProperty.call(n,u)&&(o[u]=n[u]);o.originalType=e,o[c]="string"==typeof e?e:r,l[1]=o;for(var s=2;s<a;s++)l[s]=t[s];return i.createElement.apply(null,l)}return i.createElement.apply(null,t)}g.displayName="MDXCreateElement"},7609:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>s});var i=t(7462),r=(t(7294),t(3905));const a={id:"vserver_linux_ssh2fa",title:"Zwei Faktor Authentifizierung f\xfcr Linux Server einrichten",description:"Informationen, wie du Zwei Faktor Authentifizierung f\xfcr deinen Linux vServer von ZAP-Hosting einrichten kannst - ZAP-Hosting.com Dokumentationen",sidebar_label:"Zwei Faktor Authentifizierung"},l=void 0,o={unversionedId:"vserver_linux_ssh2fa",id:"vserver_linux_ssh2fa",title:"Zwei Faktor Authentifizierung f\xfcr Linux Server einrichten",description:"Informationen, wie du Zwei Faktor Authentifizierung f\xfcr deinen Linux vServer von ZAP-Hosting einrichten kannst - ZAP-Hosting.com Dokumentationen",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/vserver_linux_ssh2fa.md",sourceDirName:".",slug:"/vserver_linux_ssh2fa",permalink:"/guides/de/docs/vserver_linux_ssh2fa",draft:!1,editUrl:"https://github.com/zaphosting/docs/tree/master/docs/vserver_linux_ssh2fa.md",tags:[],version:"current",frontMatter:{id:"vserver_linux_ssh2fa",title:"Zwei Faktor Authentifizierung f\xfcr Linux Server einrichten",description:"Informationen, wie du Zwei Faktor Authentifizierung f\xfcr deinen Linux vServer von ZAP-Hosting einrichten kannst - ZAP-Hosting.com Dokumentationen",sidebar_label:"Zwei Faktor Authentifizierung"},sidebar:"vpsrootSidebar",previous:{title:"SSH Key",permalink:"/guides/de/docs/vserver_linux_sshkey"},next:{title:"Passwort \xe4ndern",permalink:"/guides/de/docs/vserver_linux_password_change"}},u={},s=[{value:"Google Authenticator Installieren",id:"google-authenticator-installieren",level:2},{value:"Google Authenticator Ausf\xfchren",id:"google-authenticator-ausf\xfchren",level:2},{value:"Google Authenticator Konfigurieren",id:"google-authenticator-konfigurieren",level:2},{value:"/etc/ssh/sshd_config",id:"etcsshsshd_config",level:3},{value:"/etc/pam.d/sshd",id:"etcpamdsshd",level:3},{value:"Einloggen mit 2FA",id:"einloggen-mit-2fa",level:2}],d={toc:s},c="wrapper";function p(e){let{components:n,...t}=e;return(0,r.kt)(c,(0,i.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"google-authenticator-installieren"},"Google Authenticator Installieren"),(0,r.kt)("p",null,"Als erstes musst du den Google Authenticator auf deinem Linux vServer/Rootserver installieren.\nKopiere dir daf\xfcr einfach diese Zeile:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo apt install libpam-google-authenticator\n")),(0,r.kt)("p",null,'Danach wirst du aufgefordert werden "Y" einzugeben um das Packet zu installieren, gib dies ein, dr\xfccke Enter und dann ist der Google Authenticator installiert!'),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166183702-67a07bf3-e199-4f20-a166-9fed0f297d1c.pn",alt:null})),(0,r.kt)("h2",{id:"google-authenticator-ausf\xfchren"},"Google Authenticator Ausf\xfchren"),(0,r.kt)("p",null,"F\xfchre nun den Google Authenticator aus, indem du ",(0,r.kt)("inlineCode",{parentName:"p"},"google-authenticator")," eingibst."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166183758-869cf62d-a242-4365-9ca3-3bbeda553870.png",alt:null})),(0,r.kt)("p",null,'Du wirst nun gefragt ob du es ausf\xfchren m\xf6chtest, schreibe dort auch einfach "Y"'),(0,r.kt)("p",null,'Du kriegst nun einen gro\xdfen QR Code.\nAchte darauf das dein Fenster gro\xdf genug f\xfcr den QR Code ist, ansonsten Dr\xfccke "CTRL+C" und gib es erneu ein.\n\xd6ffne deine Authenticator App auf deinem Smartphone und scanne den QR Code.\nF\xfcr dieses Beispiel benutzen wir den Google Authenticator.'),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/13604413/159171815-4a7368da-fab1-4284-9c90-e310a577dbbf.png",alt:"image"})),(0,r.kt)("p",null,"Stelle sicher das du dir die Backup Codes kopierst, diese k\xf6nnen jeweils einmal eingesetzt werden im Fall das du deinen Authenticator verlierst."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166183779-055a3e93-1040-460a-a589-366d9c8bdedf.png",alt:null})),(0,r.kt)("p",null,"Jetzt kannst du in der App bereits die Codes sehen mit denen du dich sp\xe4ter einloggst."),(0,r.kt)("p",null,"In unserem Fall sieht das jetzt so aus:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166183807-7e5e04a2-8da6-4d2e-bd3b-a42c2baa045a.png",alt:null})),(0,r.kt)("p",null,"Du wirst nun 4 Dinge gefragt."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Soll die Google Authenticator Konfiguration gespeichert werden?"),(0,r.kt)("li",{parentName:"ol"},"Soll nur ein Login alle 30 Sekunden m\xf6glich sein? (Also nur ein Login alle 30 Sekunden)."),(0,r.kt)("li",{parentName:"ol"},"Soll die Zeit erh\xf6t werden in der ein Code nutzbar ist?"),(0,r.kt)("li",{parentName:"ol"},"Sollen nur Drei Logins alle 30 Sekunden m\xf6glich sein? (Schutz gegen Brute Force)")),(0,r.kt)("p",null,'Aus Sicherheitsgr\xfcnden empfehlen wir bei allen 4 Fragen "Y" einzugeben und dann Enter zu dr\xfccken.'),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166183833-fdb07942-51c2-446e-b87b-e0e0d839e6d4.png",alt:null})),(0,r.kt)("h2",{id:"google-authenticator-konfigurieren"},"Google Authenticator Konfigurieren"),(0,r.kt)("p",null,"Nun m\xfcssen wir noch anpassen das der Google Authenticator auch genutzt wird."),(0,r.kt)("p",null,"Daf\xfcr sind nur zwei Datei\xe4nderungen n\xf6tig."),(0,r.kt)("h3",{id:"etcsshsshd_config"},"/etc/ssh/sshd_config"),(0,r.kt)("p",null,"In der ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/ssh/sshd_config")," aktivieren wir die erforderlichen Module."),(0,r.kt)("p",null,"\xd6ffne die ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/ssh/sshd_config")," Datei indem du "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo nano /etc/ssh/sshd_config\n")),(0,r.kt)("p",null,"eingibst."),(0,r.kt)("p",null,"Du bist nun in einem Text Editor. Du kannst dich mit den Pfeiltasten bewegen, frei Text l\xf6schen und Eingeben und schliesslich mit ",(0,r.kt)("inlineCode",{parentName:"p"},"CTRL + X")," dann ",(0,r.kt)("inlineCode",{parentName:"p"},"Y")," und letzlich ",(0,r.kt)("inlineCode",{parentName:"p"},"Enter")," die Datei Speichern."),(0,r.kt)("p",null,"Stelle nun Sicher das die beiden Zeilen ",(0,r.kt)("inlineCode",{parentName:"p"},"UsePAM")," und ",(0,r.kt)("inlineCode",{parentName:"p"},"ChallengeResponseAuthentication")," auf ",(0,r.kt)("inlineCode",{parentName:"p"},"yes")," stehen. So wie hier:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166183852-ea0dc9dd-b5db-40eb-b90e-6c53e71d0908.png",alt:null})),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166183859-2fe15906-efec-4c62-b24f-a1b0fc364ebd.png",alt:null})),(0,r.kt)("p",null,"Speichere danach die Datei mit ",(0,r.kt)("inlineCode",{parentName:"p"},"CTRL + X")," dann ",(0,r.kt)("inlineCode",{parentName:"p"},"Y")," und letzlich ",(0,r.kt)("inlineCode",{parentName:"p"},"Enter")),(0,r.kt)("p",null,"Starte danach SSH neu mit "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo systemctl restart ssh\n")),(0,r.kt)("p",null,"Wenn keine Fehler kommen gehen wir zum n\xe4chsten Schritt."),(0,r.kt)("h3",{id:"etcpamdsshd"},"/etc/pam.d/sshd"),(0,r.kt)("p",null,"In der ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/pam.d/sshd")," f\xfcgen wir den Google Authenticator dem Login hinzu."),(0,r.kt)("p",null,"\xd6ffne die ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/pam.d/sshd")," Datei indem du ",(0,r.kt)("inlineCode",{parentName:"p"},"sudo nano /etc/pam.d/sshd")," eingibst."),(0,r.kt)("p",null,"Der letzte Schritt ist nun an das Ende der Datei runterzuscrollen und ",(0,r.kt)("inlineCode",{parentName:"p"},"auth required pam_google_authenticator.so")," einzutragen."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166183887-7a683371-6ff5-4260-9300-4f79bcc29e60.png",alt:null})),(0,r.kt)("p",null,"Speichere danach die Datei mit ",(0,r.kt)("inlineCode",{parentName:"p"},"CTRL + X")," dann ",(0,r.kt)("inlineCode",{parentName:"p"},"Y")," und letzlich ",(0,r.kt)("inlineCode",{parentName:"p"},"Enter")),(0,r.kt)("h2",{id:"einloggen-mit-2fa"},"Einloggen mit 2FA"),(0,r.kt)("p",null,"Jetzt ist die Zeit gekommen sich das erste mal mit 2FA einzuloggen."),(0,r.kt)("p",null,"Nachdem du die oben genannten Schritte befolgt hast musst du nurnoch deine SSH Verbindung neustarten."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/13604413/159171829-90fb3349-c238-4558-818a-0657b87062e5.png",alt:"image"})),(0,r.kt)("p",null,"Du gibst nun ganz normal dein Passwort ein. Danach wirst du nach einem Code gefragt, gebe dort einfach den aktuellen 2FA Code ein."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166183906-b2d6e770-66fa-4096-a642-b3873470dc85.png",alt:null})),(0,r.kt)("p",null,"Und schon bist du eingeloggt! Du hast nun 2FA f\xfcr SSH aktiviert."))}p.isMDXComponent=!0}}]);