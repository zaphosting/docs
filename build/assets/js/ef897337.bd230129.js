"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[5785],{3905:(e,t,n)=>{n.d(t,{Zo:()=>i,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),u=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},i=function(e){var t=u(e.components);return a.createElement(p.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,i=s(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,h=d["".concat(p,".").concat(m)]||d[m]||c[m]||l;return n?a.createElement(h,o(o({ref:t},i),{},{components:n})):a.createElement(h,o({ref:t},i))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var u=2;u<l;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294),r=n(6010);const l={tabItem:"tabItem_Ymn6"};function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(l.tabItem,o),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>N});var a=n(7462),r=n(7294),l=n(6010),o=n(2466),s=n(6550),p=n(1980),u=n(7392),i=n(12);function d(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function c(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??d(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,s.k6)(),l=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,p._X)(l),(0,r.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(a.location.search);t.set(l,e),a.replace({...a.location,search:t.toString()})}),[l,a])]}function k(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,l=c(e),[o,s]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:l}))),[p,u]=h({queryString:n,groupId:a}),[d,k]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,l]=(0,i.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&l.set(e)}),[n,l])]}({groupId:a}),b=(()=>{const e=p??d;return m({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)((()=>{b&&s(b)}),[b]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),k(e)}),[u,k,l]),tabValues:l}}var b=n(2389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function f(e){let{className:t,block:n,selectedValue:s,selectValue:p,tabValues:u}=e;const i=[],{blockElementScrollPositionUntilNextRender:d}=(0,o.o5)(),c=e=>{const t=e.currentTarget,n=i.indexOf(t),a=u[n].value;a!==s&&(d(t),p(a))},m=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=i.indexOf(e.currentTarget)+1;t=i[n]??i[0];break}case"ArrowLeft":{const n=i.indexOf(e.currentTarget)-1;t=i[n]??i[i.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:o}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>i.push(e),onKeyDown:m,onClick:c},o,{className:(0,l.Z)("tabs__item",g.tabItem,o?.className,{"tabs__item--active":s===t})}),n??t)})))}function y(e){let{lazy:t,children:n,selectedValue:a}=e;const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function v(e){const t=k(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",g.tabList)},r.createElement(f,(0,a.Z)({},e,t)),r.createElement(y,(0,a.Z)({},e,t)))}function N(e){const t=(0,b.Z)();return r.createElement(v,(0,a.Z)({key:String(t)},e))}},1157:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>p,default:()=>h,frontMatter:()=>s,metadata:()=>u,toc:()=>d});var a=n(7462),r=(n(7294),n(3905)),l=n(4866),o=n(5162);const s={id:"vserver_linux_nextcloud",title:"VPS Install Nextcloud on server",description:"Information on how to set up a Nextcloud server on your VPS from ZAP-Hosting - ZAP-Hosting.com documentation",sidebar_label:"Nextcloud"},p=void 0,u={unversionedId:"vserver_linux_nextcloud",id:"vserver_linux_nextcloud",title:"VPS Install Nextcloud on server",description:"Information on how to set up a Nextcloud server on your VPS from ZAP-Hosting - ZAP-Hosting.com documentation",source:"@site/docs/vserver_linux_nextcloud.md",sourceDirName:".",slug:"/vserver_linux_nextcloud",permalink:"/guides/docs/vserver_linux_nextcloud",draft:!1,editUrl:"https://github.com/zaphosting/docs/tree/master/docs/vserver_linux_nextcloud.md",tags:[],version:"current",frontMatter:{id:"vserver_linux_nextcloud",title:"VPS Install Nextcloud on server",description:"Information on how to set up a Nextcloud server on your VPS from ZAP-Hosting - ZAP-Hosting.com documentation",sidebar_label:"Nextcloud"},sidebar:"vpsrootSidebar",previous:{title:"MariaDB (MySQL) Installation",permalink:"/guides/docs/vserver_linux_mariadbinstall"},next:{title:"Mastodon",permalink:"/guides/docs/vserver_linux_mastodon"}},i={},d=[{value:"What is Nextcloud?",id:"what-is-nextcloud",level:2},{value:"Nextcloud set up",id:"nextcloud-set-up",level:2},{value:"Preparation",id:"preparation",level:3},{value:"Installation",id:"installation",level:3},{value:"Security and safety",id:"security-and-safety",level:3},{value:"Manage Nextcloud",id:"manage-nextcloud",level:2}],c={toc:d},m="wrapper";function h(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"what-is-nextcloud"},"What is Nextcloud?"),(0,r.kt)("p",null,"Nextcloud is an open source cloud solution and fork of Owncloud, which was founded in 2016 by former Owncloud founder Frank Kalitschek."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/13604413/159172333-5c613339-d564-4852-8b32-d3661d283534.png",alt:"image"})),(0,r.kt)("p",null,"In order to achieve optimal performance, stability and functionality, the following setup is recommended for hosting a Nextcloud server. The Nextcloud server is not compatible with Windows and MacOS. At least not without any further virtualization or similar workarounds.",(0,r.kt)("br",null)),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"System requirements")),(0,r.kt)("br",null),"**Hardware**",(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Components")),(0,r.kt)("th",{parentName:"tr",align:null},"Minimum"),(0,r.kt)("th",{parentName:"tr",align:null},"Recommended"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CPU"),(0,r.kt)("td",{parentName:"tr",align:null},"2x 1 GHz"),(0,r.kt)("td",{parentName:"tr",align:null},"4x 2+ GHz")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"RAM"),(0,r.kt)("td",{parentName:"tr",align:null},"512 MB"),(0,r.kt)("td",{parentName:"tr",align:null},"4+ GB")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Disc"),(0,r.kt)("td",{parentName:"tr",align:null},"10 GB"),(0,r.kt)("td",{parentName:"tr",align:null},"50+ GB")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bandwidth"),(0,r.kt)("td",{parentName:"tr",align:null},"100 mbit/s (up & down)"),(0,r.kt)("td",{parentName:"tr",align:null},"500mbit/s (up & down) Recommended if several users are supposed to use the cloud")))),(0,r.kt)("br",null),"**Software**",(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Platform"),(0,r.kt)("th",{parentName:"tr",align:null},"Options"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Operating System"),(0,r.kt)("td",{parentName:"tr",align:null},"Ubuntu (14.04, 16.04, 18.04), Debian(8,9,10), CentOS 6.5/7")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Database"),(0,r.kt)("td",{parentName:"tr",align:null},"MySQL or MariaDB 5.5+ (recommended),  SQLite (only recommended for testing and minimal-instances)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Web server"),(0,r.kt)("td",{parentName:"tr",align:null},"Apache 2.4 with ",(0,r.kt)("inlineCode",{parentName:"td"},"mod_php")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"php-fpm")," (recommended)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PHP"),(0,r.kt)("td",{parentName:"tr",align:null},"5.6, 7.0 (recommended), 7.1 (recommended), 7.2")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f The requirements are based on our own experience and the information provided by the developers..")),(0,r.kt)("h2",{id:"nextcloud-set-up"},"Nextcloud set up"),(0,r.kt)("h3",{id:"preparation"},"Preparation"),(0,r.kt)("p",null,"A connection has to be established via a SSH client in order to install the cloud on a Linux server. In case you are not sure how to use SSH, here is a guide how to do so: ",(0,r.kt)("a",{parentName:"p",href:"/guides/docs/vserver_linux_ssh"},"Initial access (SSH)")),(0,r.kt)("p",null,"Once the connection is established, you can start to install the necessary packages that are required for the actual installation of Nextcloud. This includes the installation of a web server as well as PHP."),(0,r.kt)(l.Z,{mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"Debian",label:"Debian",default:!0,mdxType:"TabItem"},(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Apache (Web server)")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f Debian 8/9/10:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo apt update && sudo apt -y upgrade\nsudo apt -y install apache2\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"PHP (Hypertext Preprocessor)")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f Debian 8:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'# Step 1: Adding the PHP 7.3 PPA repository\nsudo apt -y install lsb-release apt-transport-https ca-certificates \nsudo wget -O /etc/apt/trusted.gpg.d/php.gpg https://packages.sury.org/php/apt.gpg\necho "deb https://packages.sury.org/php/ $(lsb_release -sc) main" | sudo tee /etc/apt/sources.list.d/php7.3.list\n\n# Step 2: Install PHP 7.3\nsudo apt -y install php7.3\n\n# Step 3: Install PHP 7.3 extensions\nsudo apt install php7.3-cli php7.3-fpm php7.3-json php7.3-pdo php7.3-mysql php7.3-zip php7.3-gd  php7.3-mbstring php7.3-curl php7.3-xml php7.3-bcmath php7.3-json\n')),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f Debian 9:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'# Step 1: Adding the PHP 7.3 PPA repository\nsudo apt -y install lsb-release apt-transport-https ca-certificates \nsudo wget -O /etc/apt/trusted.gpg.d/php.gpg https://packages.sury.org/php/apt.gpg\necho "deb https://packages.sury.org/php/ $(lsb_release -sc) main" | sudo tee /etc/apt/sources.list.d/php7.3.list\n\n# Step 2: Install PHP 7.3\nsudo apt -y install php7.3\n\n# Step 3: Install PHP 7.3 extensions\nsudo apt install php7.3-cli php7.3-fpm php7.3-json php7.3-pdo php7.3-mysql php7.3-zip php7.3-gd  php7.3-mbstring php7.3-curl php7.3-xml php7.3-bcmath php7.3-json\n')),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f Debian 10:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# Step 1: Install PHP 7.3\nsudo apt -y install php php-common\n\n# Step 2: Install PHP 7.3 extensions\nsudo apt -y install php-cli php-fpm php-json php-pdo php-mysql php-zip php-gd  php-mbstring php-curl php-xml php-pear php-bcmath\n")),(0,r.kt)("p",null,"Check PHP version for functionality"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php -v\n"))),(0,r.kt)(o.Z,{value:"Ubuntu",label:"Ubuntu",mdxType:"TabItem"},(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Apache (Web server)")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f Ubuntu 16.X/18.X/19.X:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo apt update && sudo apt -y upgrade\nsudo apt-get -y install apache2\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"PHP (Hypertext Preprocessor)")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f Ubuntu 16.X:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# Step 1: Add PHP 7.3 PPA\nsudo apt-get install software-properties-common\nsudo add-apt-repository ppa:ondrej/php\n\n# Step 2: Install PHP 7.3\nsudo apt-get update\nsudo apt-get install -y php7.3\n\n# Step 3: Install PHP 7.3 extensions\nsudo apt install php7.3-cli php7.3-fpm php7.3-json php7.3-pdo php7.3-mysql php7.3-zip php7.3-gd  php7.3-mbstring php7.3-curl php7.3-xml php7.3-bcmath php7.3-json\n")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f Ubuntu 18.X:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# Step 1: Add PHP 7.3 PPA\nsudo apt-get install software-properties-common\nsudo add-apt-repository ppa:ondrej/php\n\n# Step 2: Install PHP 7.3\nsudo apt-get update\nsudo apt-get install -y php7.3\n\n# Step 3: Install PHP 7.3 extensions\nsudo apt install php7.3-cli php7.3-fpm php7.3-json php7.3-pdo php7.3-mysql php7.3-zip php7.3-gd  php7.3-mbstring php7.3-curl php7.3-xml php7.3-bcmath php7.3-json\n")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f Ubuntu 19.X:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# Step 1: Add PHP 7.3 PPA\nsudo apt-get install software-properties-common\nsudo add-apt-repository ppa:ondrej/php\n\n# Step 2: Install PHP 7.3\nsudo apt-get update\nsudo apt-get install -y php7.3\n\n# Step 3: Install PHP 7.3 extensions\nsudo apt install php7.3-cli php7.3-fpm php7.3-json php7.3-pdo php7.3-mysql php7.3-zip php7.3-gd  php7.3-mbstring php7.3-curl php7.3-xml php7.3-bcmath php7.3-json\n")),(0,r.kt)("p",null,"Check PHP version for functionality"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php -v\n"))),(0,r.kt)(o.Z,{value:"CentOS",label:"CentOS",mdxType:"TabItem"},(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Apache (Web server)")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f CentOS 6:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo yum -y update\nsudo yum -y install httpd\nsudo firewall-cmd --permanent --zone=public --add-service=http\nsudo firewall-cmd --permanent --zone=public --add-service=https\nsudo firewall-cmd --reload\nsudo systemctl start httpd\nsudo systemctl enable httpd.service\n")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f CentOS 7:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo yum -y update\nsudo yum -y install httpd\nsudo firewall-cmd --permanent --zone=public --add-service=http\nsudo firewall-cmd --permanent --zone=public --add-service=https\nsudo firewall-cmd --reload\nsudo systemctl start httpd\nsudo systemctl enable httpd\n")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f CentOS 8:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo yum -y update\nsudo yum -y install httpd\nsudo firewall-cmd --permanent --zone=public --add-service=http\nsudo firewall-cmd --permanent --zone=public --add-service=https\nsudo firewall-cmd --reload\nsudo systemctl start httpd\nsudo systemctl enable httpd\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"PHP (Hypertext Preprocessor)")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f CentOS 6:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# Step 1: Set up Yum repository\nyum install epel-release\nrpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm\n\n# Step 2: Install PHP 7.3\nyum --enablerepo=remi-php73 install php\n\n# Step 3: Install PHP 7.3 extensions\nyum --enablerepo=remi-php73 install php-xml php-soap php-xmlrpc php-mbstring php-json php-gd php-mcrypt\n")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f CentOS 7:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# Step 1: Set up Yum repository\nyum install epel-release\nrpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm\n\n# Step 2: Install PHP 7.3\nyum --enablerepo=remi-php73 install php\n\n# Step 3: Install PHP 7.3 extensions\nyum --enablerepo=remi-php73 install php-xml php-soap php-xmlrpc php-mbstring php-json php-gd php-mcrypt\n")),(0,r.kt)("p",null,"\ud83d\uddc4\ufe0f CentOS 8:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# Step 1: Set up Yum repository\ndnf install dnf-utils http://rpms.remirepo.net/enterprise/remi-release-8.rpm\n\n# Step 2: Install PHP 7.3\ndnf module reset php\ndnf module enable php:remi-7.3\ndnf install php\n")),(0,r.kt)("p",null,"Check PHP version for functionality"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php -v\n")))),(0,r.kt)("p",null,"The next step is to define a database type to store the relevant information. There are several options:"),(0,r.kt)(l.Z,{mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"MariaDB",label:"MariaDB",default:!0,mdxType:"TabItem"},(0,r.kt)("br",null),"If you have decided to use this type of database, then you have to follow these steps:",(0,r.kt)("p",null,"Package installation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo apt-get install mariadb-server php-mysql\n")),(0,r.kt)("p",null,"During the installation you will be asked to set a root password. If there is no password request, then the default password is blank. This is not secure and should therefore be changed immediately afterwards! "),(0,r.kt)("p",null,"The next step is to connect to the database server and create the required database:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql -u root -p\nCREATE DATABASE nextcloud;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER 'nc_user'@'localhost' IDENTIFIED BY 'YOUR_PASSWORD_HERE';\n")),(0,r.kt)("p",null,"Afterwards a user has to be created, which gets access to the Nextcloud database. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER 'nc_user'@'localhost' IDENTIFIED BY 'YOUR_PASSWORD_HERE';\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f Don't skip this step by using the root user. This is not safe and can put your data at risk!")),(0,r.kt)("p",null,"The last step is to assign the permissions to the new user:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-SQL"},"GRANT ALL PRIVILEGES ON nextcloud.* TO 'nc_user'@'localhost';\nFLUSH PRIVILEGES;\n")),(0,r.kt)("p",null,"Once you are done, you can press Ctrl-D to exit the database and continue with the next steps.")),(0,r.kt)(o.Z,{value:"MySQL",label:"MySQL",mdxType:"TabItem"},(0,r.kt)("br",null),"If you have decided to use this type of database, then you have to follow these steps:",(0,r.kt)("p",null,"Package installation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo apt-get install mysql-server php-mysql\n")),(0,r.kt)("p",null,"During the installation you will be asked to set a root password. If there is no password request, then the default password is blank. This is not secure and should therefore be changed immediately afterwards! "),(0,r.kt)("p",null,"The next step is to connect to the database server and create the required database:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql -u root -p\nCREATE DATABASE nextcloud;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER 'nc_user'@'localhost' IDENTIFIED BY 'YOUR_PASSWORD_HERE';\n")),(0,r.kt)("p",null,"Afterwards a user has to be created, which gets access to the Nextcloud database. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER 'nc_user'@'localhost' IDENTIFIED BY 'YOUR_PASSWORD_HERE';\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Don't skip this step by using the root user.This is not safe and can put your data at risk!")),(0,r.kt)("p",null,"The last step is to assign the permissions to the new user:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-SQL"},"GRANT ALL PRIVILEGES ON nextcloud.* TO 'nc_user'@'localhost';\nFLUSH PRIVILEGES;\n")),(0,r.kt)("p",null,"Once you are done, you can press Ctrl-D to exit the database and continue with the next steps.")),(0,r.kt)(o.Z,{value:"PostgreSQL",label:"PostgreSQL",mdxType:"TabItem"},(0,r.kt)("br",null),"If you have decided to use this type of database, then you have to follow these steps:",(0,r.kt)("p",null,"Package installation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo apt-get update\nsudo apt-get install postgresql postgresql-contrib\n")),(0,r.kt)("p",null,"During the installation you will be asked to set a root password. If there is no password request, then the default password is blank. This is not secure and should therefore be changed immediately afterwards! "),(0,r.kt)("p",null,"The next step is to connect to the database server and create the required database:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"sudo -u postgres psql\nCREATE DATABASE nextcloud;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER nextcloud with encrypted password 'YOUR_PASSWORD_HERE';\n")),(0,r.kt)("p",null,"Afterwards a user has to be created, which gets access to the Nextcloud database. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER 'nc_user'@'localhost' IDENTIFIED BY 'YOUR_PASSWORD_HERE';\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Don't skip this step by using the root user.This is not safe and can put your data at risk!")),(0,r.kt)("p",null,"The last step is to assign the permissions to the new user:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-SQL"},"grant all privileges on database mydb to myuser;\nFLUSH PRIVILEGES;\n")),(0,r.kt)("p",null,"Once you are done, you can press Ctrl-D to exit the database. Afterwards you can modify the PostgreSQL database either via the web installer or via the ",(0,r.kt)("strong",{parentName:"p"},"config.php")," Config."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<?php\n$AUTOCONFIG = array(\n  "dbtype"        => "pgsql",\n  "dbname"        => "nextcloud",\n  "dbuser"        => "username",\n  "dbpass"        => "password",\n  "dbhost"        => "localhost",\n  "dbtableprefix" => "",\n);\n'))),(0,r.kt)(o.Z,{value:"SQLite",label:"SQLite",mdxType:"TabItem"},(0,r.kt)("br",null),"If you have decided to use this type of database, then you have to follow these steps:",(0,r.kt)("p",null,"Package installation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"apt-get install sqlite3 php-sqlite3\n")),(0,r.kt)("p",null,"Create new SQLite 3 database"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sqlite3 DatabaseName.db\n")),(0,r.kt)("p",null,"After that, the SQLite 3 database can be modified either via the web installer or via the ",(0,r.kt)("strong",{parentName:"p"},"config.php")," Config."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<?php\n$AUTOCONFIG = array(\n  "dbtype"        => "sqlite",\n  "dbname"        => "nextcloud",\n  "dbtableprefix" => "",\n);\n')))),(0,r.kt)("h3",{id:"installation"},"Installation"),(0,r.kt)("p",null,"Now the actual installation of Nextcloud can be started. The software needs to be downloaded and unpacked:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cd /var/www/nextcloud/\nwget https://download.nextcloud.com/server/releases/nextcloud-16.0.4.zip\napt-get install unzip\nunzip nextcloud-16.0.4.zip\nchown -R www-data:www-data nextcloud\nrm nextcloud-16.0.4.zip\n")),(0,r.kt)("p",null,"Once this step is finished, it's time to run the installation script. Access is possible via the browser via the following URL:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"http://domain.tld/nextcloud/"},"http://domain.tld/nextcloud/"))," ")),(0,r.kt)("p",null,"The installation script configuration appears, in which a root user is created and database information defined:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/13604413/159172340-920fdf9f-7646-447d-b8c5-cd472627b9b5.png",alt:"image"})),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/13604413/159172341-efd5c39c-cf32-44d5-8518-51632d3fb475.png",alt:"image"})),(0,r.kt)("h3",{id:"security-and-safety"},"Security and safety"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Setup Warnings")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/13604413/159172343-b8d041bc-2b9f-429d-9a87-54d6f86d8973.png",alt:"image"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Data Directory")),(0,r.kt)("p",null,"It is strongly recommended to place the data directory outside of the web root directory (i.e. outside of /var/www). The easiest way to do this is with a new installation. The directory can be defined during the setup. However, the directory must first be created and the corresponding permissions have to be set. The data could for example be stored in a directory called Cloud in the home directory."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mkdir /home/cloud/\nchown -R www-data:www-data /home/cloud/\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"HTTPS via SSL certificate (Let's Encrypt)")," "),(0,r.kt)("p",null,"A good cloud solution should only be accessible via SSL connection. Without SSL encryption, data and information is transferred in plain text. Such information can easily and quickly be intercepted and read without encryption."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<IfModule mod_ssl.c>\n<VirtualHost *:443>\n DocumentRoot "/var/www/html/cloud"\n ServerName domain.tld\n\n ErrorLog ${APACHE_LOG_DIR}/error.log\n CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n<Directory /var/www/html/cloud/>\n Options +FollowSymlinks\n AllowOverride All\n\n <IfModule mod_dav.c>\n Dav off\n </IfModule>\n\n SetEnv HOME /var/www/html/cloud\n SetEnv HTTP_HOME /var/www/html/cloud\n Satisfy Any\n\n</Directory>\n\nSSLCertificateFile /etc/letsencrypt/live/domain.tld/fullchain.pem\nSSLCertificateKeyFile /etc/letsencrypt/live/domain.tld/privkey.pem\n</VirtualHost>\n</IfModule>\n\n<IfModule mod_headers.c>\n     Header always set Strict-Transport-Security "max-age=15768000; preload"\n </IfModule>\n')),(0,r.kt)("p",null,"Furthermore, all HTTP traffic should be redirected to HTTPS by using a permanent redirection with status code 301. This can be achieved by using Apache with a configuration like the following Apache VirtualHosts configuration:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"<VirtualHost *:80>\n   ServerName domain.tld\n   Redirect permanent / https://domain.tld/\n</VirtualHost>\n")),(0,r.kt)("h2",{id:"manage-nextcloud"},"Manage Nextcloud"),(0,r.kt)("p",null,"Access to Nextcloud is possible via the browser, as well as via the smartphone and computer using the app. The download sources can be found here: ",(0,r.kt)("a",{parentName:"p",href:"https://nextcloud.com/install/#install-clients"},"https://nextcloud.com/install/#install-clients")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/13604413/159172347-25273458-2607-4c15-acfb-db2bfc1bf62d.png",alt:"image"})),(0,r.kt)("p",null,"Under settings you can adjust a few more options even after the setup and view important information like logs, activities. This includes additional security settings (two-factor authentication, encryption, ... ), design settings (logo, color, slogan, header), access settings and much more."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Apps")),(0,r.kt)("p",null,"Moreover, there is also the possibility to install additional apps apart from the default apps. You can access them via the menu item ",(0,r.kt)("strong",{parentName:"p"},"Apps"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/13604413/159172353-708039fe-2697-4852-83d5-e132bf129f47.png",alt:"image"})),(0,r.kt)("p",null,"With such ",(0,r.kt)("strong",{parentName:"p"},"Apps")," it is possible to further individualize Nextcloud according to your wishes."))}h.isMDXComponent=!0}}]);