"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3367],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),u=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(i.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),h=a,m=d["".concat(i,".").concat(h)]||d[h]||p[h]||o;return n?r.createElement(m,l(l({ref:t},c),{},{components:n})):r.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=h;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[d]="string"==typeof e?e:a,l[1]=s;for(var u=2;u<o;u++)l[u]=n[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(7294),a=n(6010);const o={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:n,className:l}=e;return r.createElement("div",{role:"tabpanel",className:(0,a.Z)(o.tabItem,l),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(7462),a=n(7294),o=n(6010),l=n(2466),s=n(6550),i=n(1980),u=n(7392),c=n(12);function d(e){return function(e){return a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:a}}=e;return{value:t,label:n,attributes:r,default:a}}))}function p(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??d(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const r=(0,s.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,i._X)(o),(0,a.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(r.location.search);t.set(o,e),r.replace({...r.location,search:t.toString()})}),[o,r])]}function b(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,o=p(e),[l,s]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:o}))),[i,u]=m({queryString:n,groupId:r}),[d,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,o]=(0,c.Nk)(n);return[r,(0,a.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:r}),y=(()=>{const e=i??d;return h({value:e,tabValues:o})?e:null})();(0,a.useLayoutEffect)((()=>{y&&s(y)}),[y]);return{selectedValue:l,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),b(e)}),[u,b,o]),tabValues:o}}var y=n(2389);const k={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function f(e){let{className:t,block:n,selectedValue:s,selectValue:i,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,l.o5)(),p=e=>{const t=e.currentTarget,n=c.indexOf(t),r=u[n].value;r!==s&&(d(t),i(r))},h=e=>{let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:l}=e;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>c.push(e),onKeyDown:h,onClick:p},l,{className:(0,o.Z)("tabs__item",k.tabItem,l?.className,{"tabs__item--active":s===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:r}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===r));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function g(e){const t=b(e);return a.createElement("div",{className:(0,o.Z)("tabs-container",k.tabList)},a.createElement(f,(0,r.Z)({},e,t)),a.createElement(v,(0,r.Z)({},e,t)))}function w(e){const t=(0,y.Z)();return a.createElement(g,(0,r.Z)({key:String(t)},e))}},188:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>s,metadata:()=>u,toc:()=>d});var r=n(7462),a=(n(7294),n(3905)),o=n(4866),l=n(5162);const s={id:"vserver_linux_rsync",title:"VPS Backing up Linux servers with Rsync",description:"Information on how to make backups of your Linux VPS from ZAP-Hosting with Rsync - ZAP-Hosting.com documentation",sidebar_label:"Rsync Linux"},i=void 0,u={unversionedId:"vserver_linux_rsync",id:"vserver_linux_rsync",title:"VPS Backing up Linux servers with Rsync",description:"Information on how to make backups of your Linux VPS from ZAP-Hosting with Rsync - ZAP-Hosting.com documentation",source:"@site/docs/vserver_linux_rsync.md",sourceDirName:".",slug:"/vserver_linux_rsync",permalink:"/guides/docs/vserver_linux_rsync",draft:!1,editUrl:"https://github.com/zaphosting/docs/tree/master/docs/vserver_linux_rsync.md",tags:[],version:"current",frontMatter:{id:"vserver_linux_rsync",title:"VPS Backing up Linux servers with Rsync",description:"Information on how to make backups of your Linux VPS from ZAP-Hosting with Rsync - ZAP-Hosting.com documentation",sidebar_label:"Rsync Linux"},sidebar:"vpsrootSidebar",previous:{title:"SSL-Certificate (Let's Encrypt)",permalink:"/guides/docs/vserver_linux_ssl"},next:{title:"Install webserver",permalink:"/guides/docs/vserver_linux_webserver"}},c={},d=[{value:"Rsync:",id:"rsync",level:2},{value:"Copy data to another local directory or drive:",id:"copy-data-to-another-local-directory-or-drive",level:2},{value:"Step 1",id:"step-1",level:2},{value:"Step 3",id:"step-3",level:2},{value:"Step 4",id:"step-4",level:2},{value:"Step 5",id:"step-5",level:2}],p={toc:d},h="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(h,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"rsync"},"Rsync:"),(0,a.kt)("p",null,"Backups can be made with the tool Rsync.\nThey can be copied on the local system itself to another directory/drive or to a remote system.  "),(0,a.kt)("h2",{id:"copy-data-to-another-local-directory-or-drive"},"Copy data to another local directory or drive:"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f Attention: The first run can take much longer than the following runs, depending on the amount of data. This is because the first time Rsync syncs all data, from the second time on only changed data will be synchronized.\nSo then a incremental backup is created.  ")),(0,a.kt)("h2",{id:"step-1"},"Step 1"),(0,a.kt)("p",null,"Rsync can be installed with the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"apt install rsync\n")),(0,a.kt)("p",null,"After it has been installed, it can be used directly. "),(0,a.kt)(o.Z,{mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Daily backup to a local directory/drive",label:"Daily backup to a local directory/drive",mdxType:"TabItem"},"## Step 2",(0,a.kt)("p",null,"In this example, the Client folder under /home should be synchronized to the Backups folder under /home. "),(0,a.kt)("p",null,"This can be done with the following command: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rsync -arz /home/Client /home/Backup\n")),(0,a.kt)("p",null,"-a=Archiving, the attributes will be copied"),(0,a.kt)("br",null),"-r=Recursive, subfolders are synchronized too",(0,a.kt)("br",null),"-z=Compression, depending on data quantity/data size is compressed",(0,a.kt)("p",null,"The folder was synchronized successfully "),(0,a.kt)("p",null,"If a file etc. in the client folder is deleted now, it will remain in the backup folder.\nBut since the files should always be 1:1 synchronous, the rsync command can easily be changed, this change will ensure that data etc. that are no longer present in the client folder are also removed from the backup folder. "),(0,a.kt)("p",null,"The modified command is: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rsync -arz --delete /home/Client /home/Backup\n")),(0,a.kt)("p",null,"-a=Archiving, the attributes will be copied"),(0,a.kt)("br",null),"-r=Recursive, subfolders are synchronized too",(0,a.kt)("br",null),"-z=Compression, depending on data quantity/data size is compressed",(0,a.kt)("br",null),"--delete= Deletes data that no longer exists in the source but still exists in the target",(0,a.kt)("h2",{id:"step-3"},"Step 3"),(0,a.kt)("p",null,"So that the command does not always have to be d manually, it can simply be placed in a cronjob.\nFor example, a backup should be created daily at 3 am: "),(0,a.kt)("p",null,"Open crontab -e:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166191682-3b56805e-1677-4c48-b5d9-107148e76367.png",alt:null})),(0,a.kt)("p",null,'With the number 1 "nano" can be used as an editor.\nWith the number 2, "vim" can be used as an editor.  '),(0,a.kt)("p",null,"After the file has been opened with e.g. Nano, a crontab can be generated and entered.\nA crontab can be created with this ",(0,a.kt)("a",{parentName:"p",href:"https://crontab-generator.org/"},"Generator"),". "),(0,a.kt)("p",null,"The entered crontab then looks as follows: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'0 3 * * * rsync --progress -arz --delete -e  "ssh -i /home/sshkey/keybackup" /home/Client/ root@123.123.123.123:/home/Backup/Home-Server1/ >/dev/null 2>&1\n')),(0,a.kt)("p",null,"Every day at 3 a.m. the command is executed and a backup is created. ")),(0,a.kt)(l.Z,{value:"Daily backup to a remote system",label:"Daily backup to a remote system",mdxType:"TabItem"},(0,a.kt)("h2",{id:"step-4"},"Step 4"),(0,a.kt)("p",null,"In this example, the Client folder under /home should be synchronized to the Backups folder under on a remote system. The connection is to be made via SSH key, so that a backup can also be automated.  "),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Important: Rsync must also be installed on the remote server. "),(0,a.kt)("pre",{parentName:"blockquote"},(0,a.kt)("code",{parentName:"pre"},"apt install rsync\n"))),(0,a.kt)("p",null,"For example, the following command can be used to back up the data to the remote host (customization required): "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'rsync --progress -arz -e  "ssh -i /home/sshkey/keybackup" /home/Client/ root@123.123.123.123:/home/Backup/Home-Server1/\n')),(0,a.kt)("p",null,"-a=Archiving, the attributes will be copied"),(0,a.kt)("br",null),"-r=Recursive, subfolders are synchronized too",(0,a.kt)("br",null),"-z=Compression, depending on data quantity/data size is compressed",(0,a.kt)("br",null),"-e=Specifies SSH port (default 22)",(0,a.kt)("br",null),'Specify SSH key (path)("ssh -i /home/sshkey/keybackup")= ssh -i /[path to key]',(0,a.kt)("br",null),"Specify the directory to be backed up (/home/client/)= /[directory]",(0,a.kt)("br",null),"RemoteHost(root@123.123.123.123:)= Login Name of the user on the RemoteHost and address: name@IP/Domain",(0,a.kt)("br",null),"Target directory for the data on the RemoteHost(:/home/Backup/Home-Server1/)= :/[path to key]",(0,a.kt)("p",null,"The folder/files have been successfully synchronized/saved to the remote directory after executing the command."),(0,a.kt)("p",null,"If a file etc. is deleted in the client folder, it will remain in the backup folder on the remote host.\nBut since the files should always be 1:1 synchronous, the rsync command can easily be modified to remove data etc. that is no longer present in the client folder from the backup folder on the remote host. "),(0,a.kt)("p",null,"The modified command is:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'rsync --progress -arz --delete -e  "ssh -i /home/sshkey/keybackup" /home/Client/ root@123.123.123.123:/home/Backup/Home-Server1/\n')),(0,a.kt)("p",null,"-a=Archiving, the attributes will be copied"),(0,a.kt)("br",null),"-r=Recursive, subfolders are synchronized too",(0,a.kt)("br",null),"-z=Compression, depending on data quantity/data size is compressed",(0,a.kt)("br",null),"--delete= Deletes data that no longer exists in the source but still exists in the target",(0,a.kt)("br",null),"-e=Specifies SSH port (default 22)",(0,a.kt)("br",null),'Specify SSH key (path)("ssh -i /home/sshkey/keybackup")= ssh -i /[path to key]',(0,a.kt)("br",null),"Specify the directory to be backed up (/home/client/)= /[directory]",(0,a.kt)("br",null),"RemoteHost(root@123.123.123.123:)= Login Name of the user on the RemoteHost and address: name@IP/Domain",(0,a.kt)("br",null),"Target directory for the data on the RemoteHost(:/home/Backup/Home-Server1/)= :/[Path to target directory]",(0,a.kt)("h2",{id:"step-5"},"Step 5"),(0,a.kt)("p",null,"So that the command does not always have to be executed manually, it can simply be placed in a cronjob.\nFor example, a backup should be created daily at 3 am: "),(0,a.kt)("p",null,"Open crontab -e:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/61839701/166191682-3b56805e-1677-4c48-b5d9-107148e76367.png",alt:null})),(0,a.kt)("p",null,'With the number 1 "nano" can be used as an editor.\nWith the number 2, "vim" can be used as an editor.  '),(0,a.kt)("p",null,"After the file has been opened with e.g. Nano, a crontab can be generated and entered.\nA crontab can be created with this ",(0,a.kt)("a",{parentName:"p",href:"https://crontab-generator.org/"},"Generator"),". "),(0,a.kt)("p",null,"The entered crontab then looks as follows: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'0 3 * * * rsync --progress -arz --delete -e  "ssh -i /home/sshkey/keybackup" /home/Client/ root@123.123.123.123:/home/Backup/Home-Server1/ >/dev/null 2>&1\n')),(0,a.kt)("p",null,"Every day at 3 a.m. the command is executed and a backup is created. "))))}m.isMDXComponent=!0}}]);